{
    "name": "smollm-instruct-fine-tune",
    "displayName": "SmolLM-1-Instruct-Fine-Tune",
    "version": "0.1.68",
    "scope": "public",
    "description": "SmolLM-1-Instruct-Fine-Tune from Hugging Face, ready for fintune with QLoRA.",
    "attributes": {
      "Provider": "Hugging Face",
      "Deployed By": "Dataloop",
      "License": "Apache 2.0",
      "Media Type": [
        "Text"
      ],
      "Category": "Model",
      "Gen AI": "LLM",
      "NLP": "Conversational",
      "Hub": [
        "Dataloop"
      ]
    },
    "codebase": {
      "type": "git",
      "gitUrl": "https://github.com/dataloop-ai-apps/huggingface-adapter.git",
      "gitTag": "0.1.68"
    },
    "components": {
      "computeConfigs": [
        {
          "name": "smollm-instruct-fine-tune-deploy",
          "runtime": {
            "podType": "highmem-m",
            "concurrency": 10,
            "runnerImage": "gcr.io/viewo-g/piper/agent/runner/apps/llm-finetune-playground:0.0.5",
            "autoscaler": {
              "type": "rabbitmq",
              "minReplicas": 0,
              "maxReplicas": 2
            }
          }
        },
        {
            "name": "smollm-instruct-fine-tune-train",
            "runtime": {
              "podType": "gpu-t4-m",
              "concurrency": 1,
              "runnerImage": "gcr.io/viewo-g/piper/agent/runner/apps/llm-finetune-playground:0.0.5",
              "autoscaler": {
                "type": "rabbitmq",
                "minReplicas": 0,
                "maxReplicas": 1
              }
            }
          }
      ],
      "modules": [
        {
          "name": "smollm-instruct-fine-tune-module",
          "entryPoint": "adapters/smollm1_instruct_fine_tune/model_adapter_qlora.py",
          "className": "ModelAdapter",
          "computeConfig": "smollm-instruct-fine-tune-deploy",
          "description": "smollm-instruct-fine-tune-module",
          "initInputs": [
            {
              "type": "Model",
              "name": "model_entity"
            }
          ],
          "functions": [
            {
              "name": "predict_items",
              "input": [
                {
                  "type": "Item[]",
                  "name": "items",
                  "description": "List of items to run inference on"
                }
              ],
              "output": [
                {
                  "type": "Item[]",
                  "name": "items",
                  "description": "The same input images for prediction."
                },
                {
                  "type": "Annotation[]",
                  "name": "annotations",
                  "description": "The predicted annotations."
                }
              ],
              "displayName": "Predict Items",
              "displayIcon": "",
              "description": "predict items"
            },
            {
              "name": "predict_dataset",
              "input": [
                {
                  "type": "Dataset",
                  "name": "dataset",
                  "description": ""
                },
                {
                  "type": "Json",
                  "name": "filters",
                  "description": "Dataloop Filter DQL"
                }
              ],
              "output": [
              ],
              "displayName": "Predict Dataset",
              "displayIcon": "",
              "description": "Function to inference on a dataset"
            },
            {
                "name": "train_model",
                "computeConfig": "smollm-instruct-fine-tune-train",
                "input": [
                  {
                    "type": "Model",
                    "name": "model",
                    "description": "Dataloop Model Entity"
                  }
                ],
                "output": [
                  {
                    "type": "Model",
                    "name": "model",
                    "description": "Dataloop Model Entity"
                  }
                ],
                "displayName": "Train A Model",
                "displayIcon": "",
                "description": "Fine-tune model on a custom dataset. "
              }
          ]
        }
      ],
      "models": [
        {
          "name": "HuggingFaceTB/SmolLM-1.7B-Instruct",
          "moduleName": "smollm-instruct-fine-tune-module",
          "scope": "project",
          "status": "pre-trained",
          "outputType": "embedding",
          "configuration": {
            "system_prompt": "You are a helpful and a bit cynical assistant. Give relevant and short answers, if you dont know the answer just say it, dont make up an answer",
            "model_name": "HuggingFaceTB/SmolLM-1.7B-Instruct",
            "r": 8,
            "lora_alpha": 16,
            "lora_dropout": 0.05,
            "task_type": "CAUSAL_LM",
            "target_modules": ["q_proj", "v_proj", "k_proj", "o_proj"],
            "num_train_epochs": 15,
            "per_device_train_batch_size": 1,
            "gradient_accumulation_steps": 16,
            "optim": "paged_adamw_32bit",
            "save_steps": 10,
            "logging_steps": 10,
            "learning_rate": 2e-4,
            "warmup_ratio": 0.03,
            "lr_scheduler_type": "constant",
            "bf16": true,
            "group_by_length": true,
            "save_total_limit": 3,
            "max_grad_norm": 0.3,
            "remove_unused_columns": false,
            "gradient_checkpointing": true,
            "use_reentrant": false,
            "report_to": ["tensorboard"],
            "logging_first_step": true,
            "log_level": "info",
            "logging_strategy": "steps",
            "save_every_n_epochs": 2
          },
          "description": "SmolLM-1.7B-Instruct from Hugging Face ready for fintune with QLoRA."
        }
      ]
    }
  }